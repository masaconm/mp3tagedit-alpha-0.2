# 課題- AudioTag Editor Alpha 0.2

## ② 課題内容（どんな作品か）

- このプロジェクトファイルは、MP3 ファイルの ID3 タグを編集するためのウェブアプリケーションのアルファ版 バージョン 0.2 です。
- 複数の MP3 ファイルをアップロードし、それらのタイトル、アーティスト名、アルバム名、アートワークなどの ID3 タグ情報を編集し、編集後のデータをダウンロードできます。

## 構成

- 本アプリケーションをテスト動作させるために、以下のライブラリと PHP 設定をしています

- ライブラリ

[getID3](https://github.com/JamesHeinrich/getID3):
MP3 ファイルの ID3 タグを解析・編集するライブラリ

- upload.php

ユーザーが MP3 ファイルをアップロードするためのページです。
アップロードされたファイルは一時ディレクトリに保存され、ID3 タグ情報（タイトル、アーティスト、アルバム、年、ジャンル、アートワーク）がデータベースに記録されます。
アップロード完了後、edit.php へリダイレクトされます。

- edit.php

アップロード済みの MP3 ファイルを一覧表示し、ID3 タグを編集することができます。
編集後、「Save Tags」ボタンを押すと ID3 タグがファイル（およびデータベース）に反映されます。
アートワークのプレビューおよび変更にも対応しています。
編集完了後、ZIP ファイルとしてまとめてダウンロードすることもできます。また、CSV エクスポート機能もあります。

- temp/ ディレクトリ

アップロードされたファイルやアートワーク用の一時保存フォルダ。temp/artwork/にはアートワーク画像が保存されます。

- vendor/ ディレクトリ

Composer を使用してインストールした getID3 ライブラリなどが格納されます。

## ③DEMO

(https://masaco.sakura.ne.jp/mp3tagedit-alpha-0.2/uploads.php)

## ④ 一時データの扱い

- ファイルのアップロードと一時保存

upload.php でユーザーが選択した MP3 ファイルは、以下の手順で一時保存されます。

アップロード受付:
$\_FILES グローバル変数を用いてアップロードされたファイルを受け取ります。

一時フォルダへの保存:
受け取ったファイルは、upload.php 内で$tempDir（./temp/ディレクトリ）へ move_uploaded_file()を使って移動・保存されます。
この temp/フォルダは、アップロード完了から ID3 タグ編集完了（ZIP ダウンロードなど）までの間、ファイルを一時的に保管する領域です。

アートワークファイルの格納:
MP3 ファイルに埋め込まれているアートワーク画像は、temp/artwork/ディレクトリ下に取得・保存されます。
これにより、edit.php 画面でアートワークプレビューが可能になります。

- データベースへの記録
  upload.php は、uploaded_files というテーブルに、以下の情報を保存します。

ファイル名 (file_name)
ファイルパス (file_path)（temp/以下のパス）
アップロード時刻 (uploaded_at)
ユーザーの IP アドレス (ip_address)
タイトル、アーティスト、アルバム、年、ジャンル、アートワークパスなどのメタ情報
これにより、後続の画面（edit.php）で、どのファイルがアップロードされ、どのメタデータを持っているかを識別できます。

- タグ編集後の一時データの処理
  edit.php で ID3 タグの編集および保存が行われた後、ユーザーは結果を ZIP としてダウンロードできます。ダウンロード処理が完了すると、temp/ディレクトリに保存されたファイルやアートワークは削除されます。
  これにより、不要な一時データがサーバー上に残らないようにしています。

## ⑥ 難しかった点・次回トライしたいこと(又は機能)

- 初期サンプルで課題としていた、一時ファイルの取り扱いロジックの追加とサーバー接続設定が難しかったです。

- 今後は、ID タグ編集項目の追加や、UI 改善に取り組みたいです。IDtag 編集画面では、エクセルライクなオートフィル機能の追加が必要。

- `getID3`ライブラリを使用して音楽ファイルのメタデータを編集していますが、他のファイル形式（例えば WAV,FLAC,AAC）にも対応したいと考えています。

## ⑦ 質問・疑問・感想、シェアしたいこと等なんでも

- [ID3 タグについて](https://ja.wikipedia.org/wiki/ID3%E3%82%BF%E3%82%B0):

- [getID3](https://github.com/JamesHeinrich/getID3):
  　 MP3 ファイルの ID3 タグを解析・編集するライブラリが必要となります。

- [Tailwind CSS](https://tailwindcss.com/):
  　ユーザーインターフェースを美しくするための CSS フレームワーク
